# Arquitectura: Framework vs Configuraciรณn Especรญfica

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                          ๐๏ธ FRAMEWORK REUTILIZABLE                              โ
โ                         (Independiente del dominio)                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ  โ OpenAPICache    โ    โ AgentFramework  โ    โ SharedChatAgent โ             โ
โ  โ                 โ    โ                 โ    โ                 โ             โ
โ  โ โข fetch_tools() โ    โ โข load_config() โ    โ โข configurable  โ             โ
โ  โ โข filter_tools()โ    โ โข route_agent() โ    โ โข tool_executor โ             โ
โ  โ โข cache_system  โ    โ โข get_prompts() โ    โ โข context_mgmt  โ             โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ                                  โ                                              โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ  โ ToolExecutor    โ    โ ContextManager  โ    โ ResponseGuard   โ             โ
โ  โ                 โ    โ                 โ    โ                 โ             โ
โ  โ โข execute()     โ    โ โข track_state() โ    โ โข validate()    โ             โ
โ  โ โข handle_errors โ    โ โข persist_data()โ    โ โข sanitize()    โ             โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ                                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โ usa
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     โ๏ธ CONFIGURACIรN ESPECรFICA DEL DOMINIO                     โ
โ                         (Telecomunicaciones/Facturas)                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ  โ agents_config   โ    โ domain_adapter  โ    โ context_config  โ             โ
โ  โ                 โ    โ                 โ    โ                 โ             โ
โ  โ โข "factura"     โ    โ โข call_api()    โ    โ โข DNI validationโ             โ
โ  โ โข "incidencia"  โ    โ โข clean_schema()โ    โ โข query_types   โ             โ
โ  โ โข "abonado"     โ    โ โข OPENAPI_URL   โ    โ โข field_rules   โ             โ
โ  โ โข tools mapping โ    โ โข API_BASE_URL  โ    โ โข error_msgs    โ             โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                                    โ
โ  โ MultiAgentRouterโ    โ API Endpoints   โ                                    โ
โ  โ                 โ    โ                 โ                                    โ
โ  โ โข routing logic โ    โ โข /datos_abonadoโ                                    โ
โ  โ โข agent_cache   โ    โ โข /facturas     โ                                    โ
โ  โ โข context flow  โ    โ โข /incidencias  โ                                    โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                                    โ
โ                                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Para Reutilizar en Otro Dominio (ej. Ventas)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                          ๐๏ธ FRAMEWORK REUTILIZABLE                              โ
โ                           (SE COPIA TAL CUAL)                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  [Exactamente el mismo cรณdigo del framework]                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โ usa
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        โ๏ธ NUEVA CONFIGURACIรN ESPECรFICA                       โ
โ                              (Ventas/Productos)                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ  โ agents_config   โ    โ sales_adapter   โ    โ sales_context   โ             โ
โ  โ                 โ    โ                 โ    โ                 โ             โ
โ  โ โข "productos"   โ    โ โข call_sales()  โ    โ โข price validationโ           โ
โ  โ โข "cotizaciones"โ    โ โข clean_price() โ    โ โข product_types โ             โ
โ  โ โข "clientes"    โ    โ โข SALES_API_URL โ    โ โข currency_rulesโ             โ
โ  โ โข tools mapping โ    โ โข API_TOKEN     โ    โ โข discount_msgs โ             โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ             โ
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                                    โ
โ  โ SalesRouter     โ    โ Sales Endpoints โ                                    โ
โ  โ                 โ    โ                 โ                                    โ
โ  โ โข sales logic   โ    โ โข /productos    โ                                    โ
โ  โ โข product_cache โ    โ โข /cotizaciones โ                                    โ
โ  โ โข quote flow    โ    โ โข /clientes     โ                                    โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                                    โ
โ                                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Guรญa Rรกpida de Separaciรณn

### โ ES FRAMEWORK (Reutilizable) SI:
- Maneja cache de herramientas OpenAPI โ
- Ejecuta herramientas genรฉricamente โ  
- Gestiona contexto conversacional โ
- Enruta entre agentes โ
- Valida respuestas โ
- **No menciona**: facturas, DNI, telecomunicaciones

### โ๏ธ ES CONFIGURACIรN (Especรญfico) SI:
- Define agentes como "factura", "incidencia" โ
- Contiene URLs especรญficas de APIs โ
- Tiene lรณgica de validaciรณn de DNI โ
- Maneja tipos de consulta especรญficos โ
- Contiene prompts del dominio โ
- **Menciona**: facturas, telecomunicaciones, DNI

### ๐ฏ REGLA SIMPLE:
**Si cambio de "telecomunicaciones" a "ventas" y necesito modificarlo โ Es configuraciรณn especรญfica**  
**Si funciona igual en ambos dominios โ Es framework reutilizable**
